% tulpackage/modules/pagestyles.tex
% Obsahuje: Definice a konfigurace stylů záhlaví a zápatí

% ==========================================================================
% Inicializace a globální nastavení
% ==========================================================================

% Příprava délek pro záhlaví a zápatí
\setlength{\headheight}{0pt}%
\renewcommand{\headrulewidth}{0pt}%
\renewcommand{\footrulewidth}{0pt}%
\newlength{\logo@height}%
\newlength{\logo@shift}%

% Potlačení neopravitelného varování kvůli výšce vyprázdněných záhlaví
\WarningFilter{fancyhdr}{\headheight is too small}%

% ==========================================================================
% Logika záhlaví (Header)
% ==========================================================================

% Nastavení a vykreslování záhlaví / žádné záhlaví
\newcommand{\noTULheader}{\setboolean{TUL@header}{false}\render@TULheader}%
\newcommand{\TULheader}{\setboolean{TUL@header}{true}\render@TULheader}%

% Vykreslování záhlaví
\newcommand{\render@TULheader}{%
    \fancyhead{}%
    \ifthenelse{\boolean{TUL@header}}{%
        \settoheight{\logo@height}{\logotext}%
        \setlength{\logo@shift}{13mm}%
        \addtolength{\logo@shift}{-\logo@height}%
        \fancyhead[L]{\raisebox{\logo@shift}[5mm]{\logotext}}%
        \fancyhead[R]{\raisebox{-11.5mm}[5mm]{\symbolTUL}}%
        \fancyheadoffset{10mm}%
    }{}%
}%

% Rendering až po načtení boolean vlaječek
\AtBeginDocument{%
    \render@TULheader%
}%

% ==========================================================================
% Logika zápatí (Footer)
% ==========================================================================

% Výchozí příkaz pro číslo stránky
\newcommand{\TULp@ge}{\thepage}%

% Příkaz pro tvorbu zápatí TUL s číslováním stránek, kontaktními informacemi apod.
\newcommand{\makeTULf@@ter}[1]{%
    \fancyfootoffset{0mm}%
    \fancyfoot[C]{}%
    % Definice formátovaných kontaktních informací
    \newcommand{\TULcontactinfo}{%
        \color{\tulcolor}\fontsize{9pt}{12pt}\selectfont%
        \raisebox{-7mm}[0pt]{\vbox{%
            \ifthenelse{\equal{\TULkontakt@name}{}}{}{%
                \TULkontakt@name\ |%
                \ifthenelse{\equal{\TULkontakt@pos}{}}{\unskip}{\TULkontakt@pos\ |}%
            }%
            \TULkontakt@phone\ | \TULkontakt@mail\\%
            \TUL%
            \ifthenelse{\equal{\CZTUL}{\CZTULsoucast}}{}{ | \TULsoucast}\\%
            \TUL@adr\ | \TUL@URL%
        }}%
    }%
    \if@twoside
        % Dvoustranná verze: kontaktní info na vnitřek, číslo stránky na vnější strany
        \fancyfoot[LO,RE]{\TULcontactinfo}%
        \ifthenelse{\equal{#1}{true}}{%
            \fancyfoot[RO,LE]{\raisebox{-1.5mm}[0pt]{\TULp@ge}}%
        }{%
            \fancyfoot[RO,LE]{}%
        }%
    \else
        % Jednostranná verze: kontaktní info vlevo, číslo stránky vpravo
        \fancyfoot[L]{\TULcontactinfo}%
        \ifthenelse{\equal{#1}{true}}{%
            \fancyfoot[R]{\raisebox{-1.5mm}[0pt]{\TULp@ge}}%
        }{%
            \fancyfoot[R]{}%
        }%
    \fi
}%

% ==========================================================================
% Aliasy a konfigurace stylů
% ==========================================================================

% Různé mutace zápatí TUL
\newcommand{\TULfooter}{\makeTULf@@ter{true}}%
\newcommand{\TULfooternopage}{\makeTULf@@ter{false}}%
\newcommand{\noTULfooter}{\fancyfoot[L,R]{}\fancyfoot[C]{\TULp@ge}}%
\newcommand{\nofootaddress}{\fancyfoot[L,C]{}\fancyfoot[R]{\TULp@ge}}%

% Zkratka pro kompletní stránku
\newcommand{\TULpage}{\TULheader\TULfooter}%

% Definice stylů stránek (fancypagestyle)
\fancypagestyle{TUL}{\TULheader\TULfooter}%
\fancypagestyle{TULnopage}{\TULheader\TULfooternopage}%
\fancypagestyle{TULheader}{\TULheader\noTULfooter}%
\fancypagestyle{TULheaderonly}{\TULheader\fancyfoot{}}%
\fancypagestyle{TULfooter}{\fancyhead{}\TULfooter}%
\fancypagestyle{TULfooternopage}{\fancyhead{}\TULfooternopage}%
\fancypagestyle{TULfooternoaddr}{\fancyhead{}\nofootaddress}%
