% tulpackage/modules/layout.tex
% Description: Page layout, geometry, and post-processing of options.

% Podmíněná konfigurace stránky podle bool hodnoty "TUL@header"
% True -> Styl stránky = "TUL", False -> Styl stránky = "TULfooter"
\ifthenelse{\boolean{TUL@header}}{\pagestyle{TUL}}{\pagestyle{TULfooter}}

% Nastavení číslování kapitol v obsahu
\ifthenelse{\boolean{TUL@numbering}}{}{%
    \renewcommand{\numberline}[1]{} % No numbering in TOC
}

% Velikost a rozložení stránky

% Nastavení základního layoutu podle velikosti papíru.
\ifthenelse{\lengthtest{\paperwidth=210mm}\AND\lengthtest{\paperheight=297mm}}{%
    % Pro A4 papír
    \ifTUL@margins
        \setlength{\oddsidemargin}{10mm}%
        \setlength{\evensidemargin}{0mm}%
        \setlength{\textwidth}{\dimexpr\paperwidth-60mm\relax}%
    \else
        \setlength{\oddsidemargin}{0mm}%
        \setlength{\evensidemargin}{0mm}%
        \setlength{\textwidth}{\dimexpr\paperwidth-50mm\relax}%
    \fi
    % Hodnoty pro A4
    \setlength{\topmargin}{-2mm}%
    \setlength{\headheight}{0mm}%
    \setlength{\headsep}{0mm}%
    \setlength{\textheight}{230mm}%
    \setlength{\footskip}{15mm}%
    \fancyfootoffset{0pt}%
}{%
    % Pro jiný formát papíru než A4
    \ifTUL@margins
        \setlength{\oddsidemargin}{10mm}%
        \setlength{\evensidemargin}{0mm}%
        \setlength{\textwidth}{\dimexpr\paperwidth-60mm\relax}%
    \else
        \setlength{\oddsidemargin}{0mm}%
        \setlength{\evensidemargin}{0mm}%
        \setlength{\textwidth}{\dimexpr\paperwidth-50mm\relax}%
    \fi
    % Upravené hodnoty pro jiný formát
    \addtolength{\topmargin}{-10mm}%
    \setlength{\headheight}{18mm}%
    \setlength{\headsep}{10mm}%
    \addtolength{\textheight}{7.5mm}%
    \setlength{\footskip}{1.2mm}%
}
% Široký režim
\newcommand{\TULwide}{%
    \setlength{\oddsidemargin}{0mm}%
    \setlength{\evensidemargin}{0mm}%
    \setlength{\textwidth}{\dimexpr\paperwidth-50mm\relax}%
    \makeTULf@@ter%
}

% Aplikace formátování nadpisů (makro definováno v formatting.tex)
\setup@TUL@titleformats

% Odsazení nadpisů
\titlespacing{\chapter}{0pt}{-1.2em}{1.0em}
\titlespacing{\section}{0pt}{1.4em}{0.8em}
\titlespacing{\subsection}{0pt}{1.4em}{0.8em}
\titlespacing{\subsubsection}{0pt}{1.4em}{0.8em}
